{"version":3,"sources":["file:///C:/Users/Administrator/MiaoMiaoMaJiang/assets/scripts/SetGenerator.ts"],"names":["_decorator","Component","Node","Sprite","SpriteFrame","resources","ccclass","property","SetGenerator","type","types","numbers","start","generateAllTiles","num","path","spriteFrame","loadSpriteFrame","tileNode","baseSprite","addComponent","baseSpriteFrame","faceNode","faceSprite","setPosition","addChild","Promise","resolve","reject","load","err","asset"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;;;;;;;;;OACrD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;8BAGjBQ,Y,WADZF,OAAO,CAAC,cAAD,C,UAEHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,2BAFb,MACaI,YADb,SACkCP,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAEH;AAErC;AAJwC,eAKhCS,KALgC,GAKxB,CAAC,KAAD,EAAQ,MAAR,EAAgB,MAAhB,EAAwB,MAAxB,EAAgC,MAAhC,CALwB;AAAA,eAMhCC,OANgC,GAMtB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,CANsB;AAAA;;AAQxCC,QAAAA,KAAK,GAAG;AACJ,eAAKC,gBAAL;AACH;;AAEKA,QAAAA,gBAAgB,GAAG;AAAA;;AAAA;AACrB,iBAAK,IAAMJ,IAAX,IAAmB,KAAI,CAACC,KAAxB,EAA+B;AAC3B,mBAAK,IAAMI,GAAX,IAAkB,KAAI,CAACH,OAAvB,EAAgC;AAC5B;AACA,oBAAMI,IAAI,iBAAeN,IAAf,SAAuBK,GAAjC;AACA,oBAAME,WAAW,SAAS,KAAI,CAACC,eAAL,CAAqBF,IAArB,CAA1B,CAH4B,CAK5B;;AACA,oBAAMG,QAAQ,GAAG,IAAIhB,IAAJ,EAAjB;AACA,oBAAMiB,UAAU,GAAGD,QAAQ,CAACE,YAAT,CAAsBjB,MAAtB,CAAnB;AACAgB,gBAAAA,UAAU,CAACH,WAAX,GAAyB,KAAI,CAACK,eAA9B;AAEA,oBAAMC,QAAQ,GAAG,IAAIpB,IAAJ,EAAjB;AACA,oBAAMqB,UAAU,GAAGD,QAAQ,CAACF,YAAT,CAAsBjB,MAAtB,CAAnB;AACAoB,gBAAAA,UAAU,CAACP,WAAX,GAAyBA,WAAzB;AACAM,gBAAAA,QAAQ,CAACE,WAAT,CAAqB,CAArB,EAAwB,CAAxB,EAb4B,CAaA;;AAC5BN,gBAAAA,QAAQ,CAACO,QAAT,CAAkBH,QAAlB;AACH;AACJ;AAlBoB;AAmBxB;;AAEOL,QAAAA,eAAe,CAACF,IAAD,EAAqC;AACxD,iBAAO,IAAIW,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCvB,YAAAA,SAAS,CAACwB,IAAV,CAAed,IAAf,EAAqBX,WAArB,EAAkC,CAAC0B,GAAD,EAAMC,KAAN,KAAgB;AAC9C,kBAAID,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN,CAAT,KACKH,OAAO,CAACI,KAAD,CAAP;AACR,aAHD;AAIH,WALM,CAAP;AAMH;;AAxCuC,O;;;;;iBAET,I","sourcesContent":["import { _decorator, Component, Node, Sprite, SpriteFrame, resources } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SetGenerator')\r\nexport class SetGenerator extends Component {\r\n    @property({ type: SpriteFrame })\r\n    baseSpriteFrame: SpriteFrame = null; // 绑定miaojiang_bai.png\r\n\r\n    // 麻将类型和数字枚举（示例）\r\n    private types = [\"wan\", \"tong\", \"tiao\", \"feng\", \"jian\"];\r\n    private numbers = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\r\n\r\n    start() {\r\n        this.generateAllTiles();\r\n    }\r\n\r\n    async generateAllTiles() {\r\n        for (const type of this.types) {\r\n            for (const num of this.numbers) {\r\n                // 动态加载牌面资源\r\n                const path = `Tiles/mj_${type}_${num}`;\r\n                const spriteFrame = await this.loadSpriteFrame(path);\r\n\r\n                // 创建节点并组合\r\n                const tileNode = new Node();\r\n                const baseSprite = tileNode.addComponent(Sprite);\r\n                baseSprite.spriteFrame = this.baseSpriteFrame;\r\n\r\n                const faceNode = new Node();\r\n                const faceSprite = faceNode.addComponent(Sprite);\r\n                faceSprite.spriteFrame = spriteFrame;\r\n                faceNode.setPosition(0, 0); // 根据实际偏移调整\r\n                tileNode.addChild(faceNode);\r\n            }\r\n        }\r\n    }\r\n\r\n    private loadSpriteFrame(path: string): Promise<SpriteFrame> {\r\n        return new Promise((resolve, reject) => {\r\n            resources.load(path, SpriteFrame, (err, asset) => {\r\n                if (err) reject(err);\r\n                else resolve(asset);\r\n            });\r\n        });\r\n    }\r\n}"]}