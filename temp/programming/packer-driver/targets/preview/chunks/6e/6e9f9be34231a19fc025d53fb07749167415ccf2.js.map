{"version":3,"sources":["file:///C:/Users/Administrator/MiaoMiaoMaJiang/assets/scripts/Majiang.ts"],"names":["_decorator","Component","Vec3","Node","tween","MahjongManager","ccclass","property","Marjong","originalPos","isSelected","onLoad","node","position","clone","on","EventType","TOUCH_END","onClick","cancelSelect","instance","cancelCurrent","trySelect","select","to","x","y","start"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,QAAAA,U;AAAYC,MAAAA,S,QAAAA,S;AAAwBC,MAAAA,I,QAAAA,I;AAAMC,MAAAA,I,QAAAA,I;AAAMC,MAAAA,K,QAAAA,K;;;AAGhDC,MAAAA,c,iBAAAA,c;;;;;;;;;OAFH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;;yBAMjBQ,O,WADZF,OAAO,CAAC,SAAD,C,UAcHC,QAAQ,CAACJ,IAAD,C,2BAdb,MACaK,OADb,SAC6BP,SAD7B,CACuC;AAAA;AAAA;AAAA,eAC3BQ,WAD2B,GACP,IAAIP,IAAJ,EADO;AAAA,eAE3BQ,UAF2B,GAEL,KAFK;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAmBnCC,QAAAA,MAAM,GAAG;AACL;AACA,eAAKF,WAAL,GAAmB,KAAKG,IAAL,CAAUC,QAAV,CAAmBC,KAAnB,EAAnB,CAFK,CAIL;;AACA,eAAKF,IAAL,CAAUG,EAAV,CAAaZ,IAAI,CAACa,SAAL,CAAeC,SAA5B,EAAuC,KAAKC,OAA5C,EAAqD,IAArD;AACH;;AAEOA,QAAAA,OAAO,GAAG;AACd,cAAI,KAAKR,UAAT,EAAqB;AACjB,iBAAKS,YAAL;AACA;AAAA;AAAA,kDAAeC,QAAf,CAAwBC,aAAxB;AACH,WAHD,MAGO;AACH;AAAA;AAAA,kDAAeD,QAAf,CAAwBE,SAAxB,CAAkC,KAAKV,IAAvC;AACA,iBAAKW,MAAL;AACH;AACJ;;AAEMA,QAAAA,MAAM,GAAG;AACZ,cAAI,KAAKb,UAAT,EAAqB;AACrB,eAAKA,UAAL,GAAkB,IAAlB,CAFY,CAIZ;;AACAN,UAAAA,KAAK,CAAC,KAAKQ,IAAN,CAAL,CACKY,EADL,CACQ,GADR,EACa;AAAEX,YAAAA,QAAQ,EAAE,IAAIX,IAAJ,CAAS,KAAKO,WAAL,CAAiBgB,CAA1B,EAA6B,KAAKhB,WAAL,CAAiBiB,CAAjB,GAAqB,EAAlD,EAAsD,CAAtD;AAAZ,WADb,EAEKC,KAFL;AAGH;;AAEMR,QAAAA,YAAY,GAAG;AAClB,cAAI,CAAC,KAAKT,UAAV,EAAsB;AACtB,eAAKA,UAAL,GAAkB,KAAlB,CAFkB,CAIlB;;AACAN,UAAAA,KAAK,CAAC,KAAKQ,IAAN,CAAL,CACKY,EADL,CACQ,GADR,EACa;AAAEX,YAAAA,QAAQ,EAAE,KAAKJ;AAAjB,WADb,EAEKkB,KAFL;AAGH,SAvDkC,CAwDnC;AAEA;;;AA1DmC,O,wEAIlCpB,Q;;;;;iBACc,E;;gFAEdA,Q;;;;;iBACc,C;;+EAEdA,Q;;;;;iBACM,W;;;;;;;iBAGY,I;;yFAElBA,Q;;;;;iBACuB,E","sourcesContent":["import { _decorator, Component, instantiate, Vec3, Node, tween } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\nimport * as cc from 'cc'\r\nimport { MahjongManager } from './MahjongManager';\r\n\r\n\r\n@ccclass('Mahjong')\r\nexport class Marjong extends Component { \r\n    private originalPos: Vec3 = new Vec3();\r\n    private isSelected: boolean = false;\r\n\r\n    @property\r\n    speed:number = 10;\r\n\r\n    @property\r\n    score:number = 1;\r\n\r\n    @property\r\n    type = \"mj_feng_1\";\r\n\r\n    @property(Node)  // 通过属性检查器绑定目标 Sprite\r\n    targetTile: Node = null!;\r\n\r\n    @property\r\n    moveUpDistance:number = 50;\r\n\r\n    onLoad() {\r\n        // 保存原始位置\r\n        this.originalPos = this.node.position.clone();\r\n        \r\n        // 添加点击事件\r\n        this.node.on(Node.EventType.TOUCH_END, this.onClick, this);\r\n    }\r\n\r\n    private onClick() {\r\n        if (this.isSelected) {\r\n            this.cancelSelect();\r\n            MahjongManager.instance.cancelCurrent();\r\n        } else {\r\n            MahjongManager.instance.trySelect(this.node);\r\n            this.select();\r\n        }\r\n    }\r\n\r\n    public select() {\r\n        if (this.isSelected) return;\r\n        this.isSelected = true;\r\n\r\n        // 抬起动画\r\n        tween(this.node)\r\n            .to(0.2, { position: new Vec3(this.originalPos.x, this.originalPos.y + 50, 0) })\r\n            .start();\r\n    }\r\n\r\n    public cancelSelect() {\r\n        if (!this.isSelected) return;\r\n        this.isSelected = false;\r\n\r\n        // 复位动画\r\n        tween(this.node)\r\n            .to(0.2, { position: this.originalPos })\r\n            .start();\r\n    }\r\n    // update(deltaTime: number) {\r\n        \r\n    // }\r\n}\r\n\r\n\r\n"]}